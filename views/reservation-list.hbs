<!-- HAVENT TESTED -->
<div class="content-section">
    <div style="margin-top: 10px;">
        <h1 id="reservation-list-title">Reservation List</h1>
    </div>
    <div class="list-details">
        <p>
            <strong>Room:</strong> {{roomData.name}}, {{roomData.building}} Building
            <span style="float: right; margin-left: 16px"><strong>Date:</strong> {{date}}</span>
        </p>
    </div>

    <div class="list-container overflow-y-auto full-vh" >
        {{#each reservations}}
        <div class="card reserve-item">
            <div class ="row g-0" style="align-items: center;">
                <div class="col-pfp">
                    <!-- idk if im doing this correctly -->
                    <img class="mr-3 list-img" src="{{this.user.profile}}" alt="{{this.user.name}}">
                </div>
                <div class="col res-details-container">
                    <div class="card-body reserve-details">
                        <h5 class="card-title"><strong>{{this.user.name}}</strong></h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">{{this.startTime}} - {{this.endTime}}</li>
                            <li class="list-group-item">Seat {{this.seat}}"</li>
                        </ul>
                    </div>
                </div>
                <div class="col-buttons">
                    <button class="btn">
                        <i class="fa-regular fa-pen-to-square"></i>
                    </button>
                    <button id="submit-delete" class="btn"><i class="fa-solid fa-trash"></i></button>
                </div>
            </div>
        </div>
        {{/each}}
    </div>

    <div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="confirm-delete-label" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirm-delete-label">Confirm Deletion</h5>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this reservation?
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" id="confirm-btn">Yes</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="delete-success" tabindex="-1" aria-labelledby="delete-success-label" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="delete-success-label">Success</h5>
                </div>
                <div class="modal-body text-center">
                    Reservation deleted successfully.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>
    <div class="back-button">
        <a href='../public/html/labtech-calendar.html'><button type="button" class="btn btn-primary">Back</button></a>
    </div>
    <script>
    const confirmDeleteSubmit = $('.submit-delete');

    confirmDeleteSubmit.on("click", function () {
        var confirmModal = new bootstrap.Modal(document.getElementById('confirm-delete'));
        confirmModal.show();

        // When "Yes" is clicked
        $('#confirm-btn').off('click').on("click", function () {
            confirmModal.hide(); // Hide the confirmation modal

            setTimeout(() => {
                var successModal = new bootstrap.Modal(document.getElementById('delete-success'));
                successModal.show();

                $('#delete-success .btn-success').off('click').on("click", function () {
                    location.reload();
                });
            }, 500);
        });
    });
    </script>
</div>